{"componentChunkName":"component---src-templates-blog-post-js","path":"/factors-Affecting-Garbage-collection-Performance/","result":{"data":{"site":{"siteMetadata":{"title":"Java Performace"}},"markdownRemark":{"id":"c1b9194b-f2a8-52a4-abc1-6a382418872b","excerpt":"The two most important factors affecting garbage collection performance are total available memory and proportion to the heap dedicated to young generation…","html":"<p>The two most important factors affecting garbage collection performance are total available memory and proportion to the heap dedicated to young generation.</p>\n<h2>Total Heap</h2>\n<p>The most important factor affecting garbage collection performace is total available memory.\r\nBecause collections occur when generations fill up, throughput is inversely proporcional to the amount\r\nof memory available.</p>\n<h2>Heap options affecting generation size</h2>\n<p>A number of options affects generation size.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 564px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/JPerformance/static/a0fd892faf7dcf611549d74b3c386669/ba4d9/heap.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30.37974683544304%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABGUlEQVQY043LPU/CQBgA4P5ef4OjE44uDETEhRgXgx0ANUE8EmzB0KYNbUPhaGs/7u69611JTRyoiZNsPvujAQMAoJQyyjhwJZUQohQgBHBgwCjncFCykrJSilKCEDJNkzGWZZm2iTYpSbnkBS+Kksi6TAmxfextk22cpwVLiYiITJnkqgZR+r8cx0mSRGvftdEK4RwPjeHjXN/L3dL3z6/uOw+zwau1XEcvZtCfeCiAIK/K+rv5Q2t1WvpUNz2zN+7djHpuYT9/vJ9ddC9vx9eDmT61+iOj++SMrHyxYRE9nGS0RJZnuaFrY3tLd3mVhVk8WXhzO1z5ezeM17gIPmWYljGtQH2dZLzDhmGgN6SkaprmeDw2//YDCkM81osq4kAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Memory\"\n        title=\"Memory\"\n        src=\"/JPerformance/static/a0fd892faf7dcf611549d74b3c386669/ba4d9/heap.png\"\n        srcset=\"/JPerformance/static/a0fd892faf7dcf611549d74b3c386669/c26ae/heap.png 158w,\n/JPerformance/static/a0fd892faf7dcf611549d74b3c386669/6bdcf/heap.png 315w,\n/JPerformance/static/a0fd892faf7dcf611549d74b3c386669/ba4d9/heap.png 564w\"\n        sizes=\"(max-width: 564px) 100vw, 564px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>In the image the difference between commited space and virtual space in the heap. At initialization of the virtual machine, the entire space for the heap is reserved.The size of the space reserved can be specified with the <strong>-Xmx</strong> option, If the value of the <strong>-Xms</strong> parameter is smaller than the value of the <strong>-Xmx</strong> parameter,then not all of the space that’s reserved is immediately committed to the virtual machine.The uncommitted space is labeled “virtual”. The old generation and young generation, can grow to the limit of the virtual space as needed.</p>\n<p>Some of the parameters are ratios of one part of the heap to another. For example, the parameter <strong>XX:NewRatio</strong> denotes the relative size of the old generation to the young generation.</p>\n<h2>Default Option Values for Heap Size</h2>\n<p>The virtual machine grows and shrinks the heap at each collection to try to keep the proportion of free space to live objects at each collection within a specific range.</p>\n<p>This target range is set as a percentage by the options <strong>-XX:MinHeapFreeRatio=“minimum”</strong> and <strong>-XX:MaxHeapFreeRatio=“maximum”</strong>\r\nand the total size is bounded below by <strong>-Xms”min”</strong> and above by <strong>-Xmx”max”</strong>.</p>\n<p>With these options, if the percent of free space in generation falls below 40%, then the generation expands to maintain 40% free space,up to the maximum allowed size of the generation.</p>\n<h2>Conserving Dynamic Footprint by Minimizing Java Heap Size</h2>\n<p>If you need to minimize the dynamic memory footprint (RAM consumed during execution) for your application, you can do this by minimizing the Java heap size. Minimize Java heap size by lowering the values of the options <strong>“-XX:MaxHeapFreeRation”</strong> (default 70%) and <strong>-XX:MinHeapFreeRatio</strong>(default 40%). Lowering <strong>-XX:MaxHeapFreeRatio</strong> and <strong>-XX:MinHeapFreeRatio</strong> by 10% has shown\r\nto successfully reduce the heap size without too much performace degradation.</p>\n<h2>The Young Generation</h2>\n<p>The second factor affecting garbage collection performance is the proportion of the heap dedicated to the young generation, the bigger the young generation, the less often minor collections occur.</p>\n<h3>Young Generation Size Options</h3>\n<p>By default, the young generation size is control by the option <strong>-XX:NewRatio</strong>, setting <strong>-XX:NewRatio=3</strong> means the ratio between the young and old generation is 1:3. The options <strong>-XX:NewSize</strong> and <strong>-XX:MaxNewSize</strong> bound young generation size from below and above.</p>\n<h2>Survivor Space Sizing</h2>\n<p>You can use the option <strong>-XX:SurvivorRatio</strong> to tune the size of the survivor spaces, for example <strong>-XX:SurvivorRatio=6</strong> sets the ratio between eden and a survivor space to 1:6.</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Option</th>\n<th align=\"left\">Default Value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">-XX:NewRatio</td>\n<td align=\"left\">2</td>\n</tr>\n<tr>\n<td align=\"left\">-XX:NewSize</td>\n<td align=\"left\">1310 MB</td>\n</tr>\n<tr>\n<td align=\"left\">-XX:MaxNewSize</td>\n<td align=\"left\">not limited</td>\n</tr>\n<tr>\n<td align=\"left\">-XX:SurvivorRatio</td>\n<td align=\"left\">8</td>\n</tr>\n</tbody>\n</table>\n<p>The maximum size of the young generation is calculated from the maximum size of the total heap and the value of the <strong>-XX:NewRatio</strong> parameter.</p>","frontmatter":{"title":"Factors Affecting Garbage Collection Performance","date":"June 30, 2021","description":"The two most important factors affecting garbage collection performance are total available memory and proportion oh the heap dedicated to young generation."}},"previous":{"fields":{"slug":"/garbage-collector-impl/"},"frontmatter":{"title":"Garbage Collector implementation"}},"next":{"fields":{"slug":"/available-collectors/"},"frontmatter":{"title":"Available Collectors"}}},"pageContext":{"id":"c1b9194b-f2a8-52a4-abc1-6a382418872b","previousPostId":"95a0015a-fd06-5d73-a67d-365fbd7cb54e","nextPostId":"d1544d67-ea60-5739-8f10-97a51f659694"}},"staticQueryHashes":["230163734","2841359383"]}